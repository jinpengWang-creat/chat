<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
</head>
<body>
    <h1>Server Sent Events</h1>

    <script>

// add Authorization header to the /events request and every request should bring the token
        const token = 'eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTk2MjY1NzYsImV4cCI6MTcyMDIzMTM3NiwibmJmIjoxNzE5NjI2NTc2LCJpc3MiOiJjaGF0X3NlcnZlciIsImF1ZCI6ImNoYXRfd2ViIiwiaWQiOjYsImZ1bGxuYW1lIjoiamFjayIsImVtYWlsIjoiamFja0AxMjIuY29tIiwiY3JlYXRlZF9hdCI6IjIwMjQtMDYtMjhUMTE6MzA6NTIuNDgxMDg0WiIsIndzX2lkIjoxfQ.nHBi3uaMxrmM7wnKPSrFG0mB17WQ5_wMWHNPCIzA47qVOBROYKRow6zNiGvJx3yyXvBVMQMZS4Glkao_BPDxCQ';
        const eventSource = new EventSource('/events?token=' + token);

        eventSource.onmessage = function(event) {
            console.log("Got: ", event.data);
        };

        eventSource.onerror = function(event) {
            console.error('An error occurred:', event);
        };

        eventSource.addEventListener('NewChat', function(event) {
            console.log('Got message:', event.data);
        });

        eventSource.addEventListener('AddToChat', function(event) {
            console.log('Got message:', event.data);
        });

        eventSource.addEventListener('RemoveFromChat', function(event) {
            console.log('Got message:', event.data);
        });

        eventSource.addEventListener('NewMessage', function(event) {
            console.log('Got message:', event.data);
        });
    </script>
</body>
</html>
